{% extends "base.html" %}

{% block content %}
    <article>
        <h1>WebGL GPU Information</h1>

        <blockquote>
            <p>This page uses the WebGL API in your browser to retrieve the specific vendor and model of your Graphics Processing Unit (GPU). This is one of many data points used to create a unique browser fingerprint for tracking without cookies.</p>
            <footer>
                <!-- <a href="/posts/1.html">‚Üê Back to the full article on Cookieless Tracking Business Risks</a> -->
            </footer>
        </blockquote>

        <hr>

        <div class="info-box">
            <span class="info-label">GPU Vendor:</span>
            <span class="info-value" id="gpu-vendor">Detecting...</span>
        </div>
        <div class="info-box">
            <span class="info-label">GPU Renderer:</span>
            <span class="info-value" id="gpu-renderer">Detecting...</span>
        </div>

        <canvas id="webgl-canvas" width="1" height="1" style="display: none;"></canvas>
    </article>

    <script>
        const canvas = document.getElementById('webgl-canvas');
        const vendorSpan = document.getElementById('gpu-vendor');
        const rendererSpan = document.getElementById('gpu-renderer');

        // Try to get the WebGL context
        const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');

        if (gl) {
            // Try to get the debug extension
            const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
            if (debugInfo) {
                // If successful, populate the individual spans
                vendorSpan.textContent = gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL);
                rendererSpan.textContent = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
            } else {
                const message = 'Extension not supported';
                vendorSpan.textContent = message;
                rendererSpan.textContent = message;
            }
        } else {
            const message = 'WebGL not supported';
            vendorSpan.textContent = message;
            rendererSpan.textContent = message;
        }
    </script>
{% endblock %}
